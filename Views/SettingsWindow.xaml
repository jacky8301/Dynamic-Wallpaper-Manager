<Window
    x:Class="WallpaperEngine.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Title="设置"
    Width="600"
    Height="450"
    Background="White"
    WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <Style x:Key="SettingGroupStyle" TargetType="GroupBox">
            <Setter Property="Margin" Value="10" />
            <Setter Property="Padding" Value="15" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{DynamicResource MaterialDesignDivider}" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  标题  -->
        <TextBlock
            Grid.Row="0"
            Margin="0,0,0,20"
            FontSize="20"
            FontWeight="Bold"
            Foreground="{DynamicResource MaterialDesignBody}"
            Text="设置" />

        <!--  设置内容区域  -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!--  Wallpaper Engine路径设置  -->
                <GroupBox Header="Wallpaper Engine设置" Style="{StaticResource SettingGroupStyle}">
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,10"
                            FontWeight="SemiBold"
                            Text="Wallpaper Engine工具路径" />

                        <StackPanel Margin="0,5,0,0" Orientation="Horizontal">
                            <TextBox
                                Width="300"
                                materialDesign:HintAssist.Hint="例如：C:\Program Files\Wallpaper Engine\wallpaper32.exe"
                                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                Text="{Binding WallpaperEnginePath, UpdateSourceTrigger=PropertyChanged}" />

                            <Button
                                Width="80"
                                Margin="10,0,0,0"
                                Command="{Binding BrowsePathCommand}"
                                Content="浏览..."
                                Style="{StaticResource MaterialDesignOutlinedButton}" />

                            <Button
                                Margin="10,0,0,0"
                                Content="自动检测"
                                Style="{StaticResource MaterialDesignOutlinedButton}"
                                ToolTip="尝试自动检测Wallpaper Engine安装路径" />
                        </StackPanel>

                        <TextBlock
                            Margin="0,5,0,0"
                            FontSize="11"
                            Foreground="Gray"
                            Text="{Binding PathStatus}" />

                        <TextBlock
                            Margin="0,10,0,0"
                            FontSize="10"
                            Foreground="{DynamicResource MaterialDesignSecondaryForeground}"
                            Text="提示：设置正确的Wallpaper Engine工具路径后，才能使用应用壁纸功能"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
        <!--  按钮区域  -->
        <Border
            Grid.Row="2"
            Margin="-20,0,-20,-20"
            Padding="10">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <Button
                    Width="100"
                    Margin="0,0,10,0"
                    Click="OK_Button_Click"
                    Content="确定"
                    Style="{StaticResource MaterialDesignRaisedButton}" />

                <Button
                    Width="100"
                    Click="Cancel_Button_Click"
                    Content="取消"
                    Style="{StaticResource MaterialDesignOutlinedButton}" />
            </StackPanel>
        </Border>
    </Grid>
</Window>